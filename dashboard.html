// Progress bar helper
function startProgressBar() {
  const container = document.getElementById("progress-container");
  const bar = document.getElementById("progress-bar");
  const text = document.getElementById("progress-text");
  container.style.display = "block";
  bar.style.width = "0%";
  text.textContent = "0%";

  let progress = 0;

  const interval = setInterval(() => {
    if(progress < 100) {
      progress = Math.min(progress + 5, 100);
      bar.style.width = progress + "%";
      text.textContent = progress + "%";
    }
    if(progress >= 100) {
      clearInterval(interval);
      setTimeout(() => { container.style.display = "none"; bar.style.width = "0%"; text.textContent = "0%"; }, 500);
    }
  }, 5000);

  return { finish: () => { progress = 100; bar.style.width = "100%"; text.textContent = "100%"; clearInterval(interval); } };
}

// Example: call this to simulate loading AI site
function generateSite(prompt) {
  const loading = document.getElementById("loading");
  loading.style.display = "block";
  loading.textContent = "Generating your AI website...";
  const progress = startProgressBar();

  setTimeout(() => {
    loading.style.display = "none";
    progress.finish();
    document.getElementById("preview").style.display = "block";
  }, 60000); // simulate 1 min generation
}

// On dashboard load
function initDashboard() {
  const prompt = localStorage.getItem("ai-prompt");
  if(!prompt) { alert("No prompt found. Redirecting..."); window.location.href="index.html"; return; }
  document.getElementById("projectName").textContent = "Your Project";
  generateSite(prompt);
}

initDashboard();
